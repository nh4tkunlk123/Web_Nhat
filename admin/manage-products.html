<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Qu·∫£n l√Ω m√≥n - G·ªçi M√≥n Nhanh (Admin)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="../assets/css/style.css"/>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark px-4">
    <a class="navbar-brand fw-bold" href="../index.html">üçú G·ªçi M√≥n Nhanh</a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="./dashboard.html">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link active" href="./manage-products.html">Qu·∫£n l√Ω m√≥n</a></li>
      </ul>
    </div>
  </nav>

  <!-- Header -->
  <section class="bg-light py-4 text-center">
    <h2 class="fw-bold text-danger">üß∞ Qu·∫£n l√Ω m√≥n ƒÉn</h2>
    <p class="text-muted">Th√™m, s·ª≠a, x√≥a m√≥n ‚Äî l∆∞u t·∫°m b·∫±ng localStorage</p>
  </section>

  <section class="container my-4">
    <!-- Actions -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
        <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#productModal" onclick="openCreate()">‚ûï Th√™m m√≥n</button>
      </div>
      <div class="input-group" style="max-width: 320px;">
        <span class="input-group-text">üîé</span>
        <input id="search" type="text" class="form-control" placeholder="T√¨m theo t√™n / danh m·ª•c" oninput="renderTable()">
      </div>
    </div>

    <!-- Table -->
    <div class="table-responsive">
      <table class="table align-middle">
        <thead class="table-danger">
          <tr>
            <th>·∫¢nh</th>
            <th>T√™n m√≥n</th>
            <th>Danh m·ª•c</th>
            <th>Gi√° (‚Ç´)</th>
            <th>H√†nh ƒë·ªông</th>
          </tr>
        </thead>
        <tbody id="tbody-products"></tbody>
      </table>
    </div>
  </section>

  <!-- Modal Add/Edit -->
  <div class="modal fade" id="productModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <form class="modal-content" onsubmit="saveProduct(event)">
        <div class="modal-header">
          <h5 class="modal-title" id="modalTitle">Th√™m m√≥n</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ƒê√≥ng"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="prodIndex">
          <div class="mb-3">
            <label class="form-label">T√™n m√≥n</label>
            <input type="text" id="name" class="form-control" required/>
          </div>
          <div class="mb-3">
            <label class="form-label">Gi√° (‚Ç´)</label>
            <input type="number" id="price" class="form-control" min="0" required/>
          </div>
          <div class="mb-3">
            <label class="form-label">Danh m·ª•c</label>
            <input type="text" id="category" class="form-control" placeholder="M√≥n ch√≠nh / N∆∞·ªõc / Tr√°ng mi·ªáng..." required/>
          </div>
          <div class="mb-3">
            <label class="form-label">·∫¢nh (URL)</label>
            <input type="text" id="img" class="form-control" placeholder="../assets/img/pho-bo.jpg ho·∫∑c link https://..."/>
            <div class="form-text">C√≥ th·ªÉ d√πng ·∫£nh trong th∆∞ m·ª•c <code>assets/img/</code> ho·∫∑c d√°n URL ·∫£nh online.</div>
          </div>
          <div class="mb-3">
            <label class="form-label">M√¥ t·∫£</label>
            <textarea id="desc" class="form-control" rows="2" placeholder="M√¥ t·∫£ ng·∫Øn"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">H·ªßy</button>
          <button class="btn btn-danger" type="submit">L∆∞u</button>
        </div>
      </form>
    </div>
  </div>

  <footer class="text-center bg-danger text-white py-3 mt-5">
    <p class="mb-0">¬© 2025 G·ªçi M√≥n Nhanh | Admin Panel</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/js/admin.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      ensureSeed();   // t·∫°o d·ªØ li·ªáu m·∫´u n·∫øu tr·ªëng
      renderTable();  // v·∫Ω b·∫£ng
    });
  </script>
</body>
</html>
